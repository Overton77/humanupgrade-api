# ============================================================================
# Device & Modality Inputs — biotech devices and modalities
# ============================================================================
# References: TemporalValidityInput (_shared), TechnologyPlatformInput (composed)
# Enums: DeviceClass, DeviceTypeFamily, ModalityRole, SensorType,
#        FunctionalMetricType, FunctionalMetricValueType, ModalityParameterValueType
# ============================================================================

# ============================================================================
# FunctionalMetric
# ============================================================================

input FunctionalMetricInput {
  functionalMetricId: String
  canonicalName: String!
  aliases: [String!]
  description: String
  metricType: FunctionalMetricType
  unit: String
  valueType: FunctionalMetricValueType
  validAt: DateTime
  invalidAt: DateTime
  expiredAt: DateTime
}

input FunctionalMetricConnectInput {
  functionalMetricId: ID!
}

input FunctionalMetricConnectByKeyInput {
  canonicalName: String!
}

input FunctionalMetricRelateUpsertInput {
  connect: FunctionalMetricConnectInput
  connectByKey: FunctionalMetricConnectByKeyInput
  upsert: FunctionalMetricInput
}

# ============================================================================
# DeviceType
# ============================================================================

input DeviceTypeInput {
  deviceTypeId: String
  canonicalName: String!
  description: String
  deviceTypeFamily: DeviceTypeFamily
  validAt: DateTime
  invalidAt: DateTime
  expiredAt: DateTime
}

input DeviceTypeConnectInput {
  deviceTypeId: ID!
}

input DeviceTypeConnectByKeyInput {
  canonicalName: String!
}

input DeviceTypeRelateUpsertInput {
  connect: DeviceTypeConnectInput
  connectByKey: DeviceTypeConnectByKeyInput
  upsert: DeviceTypeInput
}

# ============================================================================
# ModalityType
# ============================================================================

input ModalityTypeInput {
  modalityTypeId: String
  canonicalName: String!
  description: String
  validAt: DateTime
  invalidAt: DateTime
  expiredAt: DateTime
}

input ModalityTypeConnectInput {
  modalityTypeId: ID!
}

input ModalityTypeConnectByKeyInput {
  canonicalName: String!
}

input ModalityTypeRelateUpsertInput {
  connect: ModalityTypeConnectInput
  connectByKey: ModalityTypeConnectByKeyInput
  upsert: ModalityTypeInput
}

# ============================================================================
# ModalityParameter
# ============================================================================

input ModalityParameterInput {
  modalityParameterId: String
  canonicalName: String!
  description: String
  parameterKey: String
  valueType: ModalityParameterValueType
  defaultValue: String
  unit: String
  validAt: DateTime
  invalidAt: DateTime
  expiredAt: DateTime
}

input ModalityParameterConnectInput {
  modalityParameterId: ID!
}

input ModalityParameterConnectByKeyInput {
  canonicalName: String!
}

input ModalityParameterRelateUpsertInput {
  connect: ModalityParameterConnectInput
  connectByKey: ModalityParameterConnectByKeyInput
  upsert: ModalityParameterInput
}

# ============================================================================
# TechnologyPlatform (RelateUpsert for Device.implementsPlatform)
# TechnologyPlatformInput, TechnologyPlatformConnectInput from composed schema
# ============================================================================

input TechnologyPlatformConnectByKeyInput {
  canonicalName: String!
}

input TechnologyPlatformRelateUpsertInput {
  connect: TechnologyPlatformConnectInput
  connectByKey: TechnologyPlatformConnectByKeyInput
  upsert: TechnologyPlatformInput
}

# ============================================================================
# Sensor — edge input then input + RelateUpsert
# ============================================================================

input SensorMeasuresMetricEdgeInput {
  functionalMetric: FunctionalMetricRelateUpsertInput!
  signalType: String
  unit: String
  samplingRateHz: Float
  notes: String
  validAt: DateTime
  invalidAt: DateTime
  expiredAt: DateTime
  createdAt: DateTime
}

input SensorInput {
  sensorId: String
  canonicalName: String!
  aliases: [String!]
  description: String
  sensorType: SensorType
  validAt: DateTime
  invalidAt: DateTime
  expiredAt: DateTime
  measuresMetric: [SensorMeasuresMetricEdgeInput!]
}

input SensorConnectInput {
  sensorId: ID!
}

input SensorConnectByKeyInput {
  canonicalName: String!
}

input SensorRelateUpsertInput {
  connect: SensorConnectInput
  connectByKey: SensorConnectByKeyInput
  upsert: SensorInput
}

# ============================================================================
# Modality — edge inputs then input + RelateUpsert
# ============================================================================

input ModalityInstanceOfEdgeInput {
  modalityType: ModalityTypeRelateUpsertInput!
  validAt: DateTime
  invalidAt: DateTime
  expiredAt: DateTime
  createdAt: DateTime
}

input ModalityHasParameterEdgeInput {
  modalityParameter: ModalityParameterRelateUpsertInput!
  value: String
  unit: String
  min: Float
  max: Float
  notes: String
  validAt: DateTime
  invalidAt: DateTime
  expiredAt: DateTime
  createdAt: DateTime
}

input ModalityInput {
  modalityId: String
  canonicalName: String!
  description: String
  modalityRole: ModalityRole
  validAt: DateTime
  invalidAt: DateTime
  expiredAt: DateTime
  instanceOf: [ModalityInstanceOfEdgeInput!]
  hasParameter: [ModalityHasParameterEdgeInput!]
}

input ModalityConnectInput {
  modalityId: ID!
}

input ModalityConnectByKeyInput {
  canonicalName: String!
}

input ModalityRelateUpsertInput {
  connect: ModalityConnectInput
  connectByKey: ModalityConnectByKeyInput
  upsert: ModalityInput
}

# ============================================================================
# Device — edge inputs then input + RelateUpsert
# ============================================================================

input DeviceOfTypeEdgeInput {
  deviceType: DeviceTypeRelateUpsertInput!
  validAt: DateTime
  invalidAt: DateTime
  expiredAt: DateTime
  createdAt: DateTime
}

input DeviceUsesModalityEdgeInput {
  modality: ModalityRelateUpsertInput!
  purpose: String
  primary: Boolean
  validAt: DateTime
  invalidAt: DateTime
  expiredAt: DateTime
  createdAt: DateTime
}

input DeviceHasSensorEdgeInput {
  sensor: SensorRelateUpsertInput!
  count: Int
  location: String
  validAt: DateTime
  invalidAt: DateTime
  expiredAt: DateTime
  createdAt: DateTime
}

input DeviceImplementsPlatformEdgeInput {
  technologyPlatform: TechnologyPlatformRelateUpsertInput!
  notes: String
  validAt: DateTime
  invalidAt: DateTime
  expiredAt: DateTime
  createdAt: DateTime
}

input DeviceMeasuresMetricEdgeInput {
  functionalMetric: FunctionalMetricRelateUpsertInput!
  method: String
  accuracy: String
  rangeMin: Float
  rangeMax: Float
  unit: String
  validAt: DateTime
  invalidAt: DateTime
  expiredAt: DateTime
  createdAt: DateTime
}

input DeviceInput {
  deviceId: String
  canonicalName: String!
  aliases: [String!]
  description: String
  deviceClass: DeviceClass
  intendedUse: String
  version: String
  validAt: DateTime
  invalidAt: DateTime
  expiredAt: DateTime
  ofType: [DeviceOfTypeEdgeInput!]
  usesModality: [DeviceUsesModalityEdgeInput!]
  hasSensor: [DeviceHasSensorEdgeInput!]
  implementsPlatform: [DeviceImplementsPlatformEdgeInput!]
  measuresMetric: [DeviceMeasuresMetricEdgeInput!]
}

input DeviceConnectInput {
  deviceId: ID!
}

input DeviceConnectByKeyInput {
  canonicalName: String!
}

input DeviceRelateUpsertInput {
  connect: DeviceConnectInput
  connectByKey: DeviceConnectByKeyInput
  upsert: DeviceInput
}

# ============================================================================
# Upsert Inputs (for mutations)
# ============================================================================

input UpsertFunctionalMetricInput {
  functionalMetricId: String
  canonicalName: String!
  aliases: [String!]
  description: String
  metricType: FunctionalMetricType
  unit: String
  valueType: FunctionalMetricValueType
  validAt: DateTime
  invalidAt: DateTime
  expiredAt: DateTime
}

input UpsertDeviceTypeInput {
  deviceTypeId: String
  canonicalName: String!
  description: String
  deviceTypeFamily: DeviceTypeFamily
  validAt: DateTime
  invalidAt: DateTime
  expiredAt: DateTime
}

input UpsertModalityTypeInput {
  modalityTypeId: String
  canonicalName: String!
  description: String
  validAt: DateTime
  invalidAt: DateTime
  expiredAt: DateTime
}

input UpsertModalityParameterInput {
  modalityParameterId: String
  canonicalName: String!
  description: String
  parameterKey: String
  valueType: ModalityParameterValueType
  defaultValue: String
  unit: String
  validAt: DateTime
  invalidAt: DateTime
  expiredAt: DateTime
}

input UpsertSensorInput {
  sensorId: String
  canonicalName: String!
  aliases: [String!]
  description: String
  sensorType: SensorType
  validAt: DateTime
  invalidAt: DateTime
  expiredAt: DateTime
  measuresMetric: [SensorMeasuresMetricEdgeInput!]
}

input UpsertModalityInput {
  modalityId: String
  canonicalName: String!
  description: String
  modalityRole: ModalityRole
  validAt: DateTime
  invalidAt: DateTime
  expiredAt: DateTime
  instanceOf: [ModalityInstanceOfEdgeInput!]
  hasParameter: [ModalityHasParameterEdgeInput!]
}

input UpsertDeviceInput {
  deviceId: String
  canonicalName: String!
  aliases: [String!]
  description: String
  deviceClass: DeviceClass
  intendedUse: String
  version: String
  validAt: DateTime
  invalidAt: DateTime
  expiredAt: DateTime
  ofType: [DeviceOfTypeEdgeInput!]
  usesModality: [DeviceUsesModalityEdgeInput!]
  hasSensor: [DeviceHasSensorEdgeInput!]
  implementsPlatform: [DeviceImplementsPlatformEdgeInput!]
  measuresMetric: [DeviceMeasuresMetricEdgeInput!]
}
