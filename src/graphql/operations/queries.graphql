# --- User Queries ---

query Me {
  me {
    id
    email
    name
    role
    profile {
      id
      userId
      goals {
        goalType
        priority
        notes
      }
      experienceLevel
      dietStyle
      avoidances
      timeBudget
      preferredFormats
      topicInterests
      entityPreferences {
        likedEntityIds
        hiddenEntityIds
        blockedEntityIds
      }
      createdAt
      updatedAt
    }
  }
}

query MyProfile {
  myProfile {
    id
    userId
    goals {
      goalType
      priority
      notes
    }
    experienceLevel
    dietStyle
    avoidances
    timeBudget
    preferredFormats
    topicInterests
    entityPreferences {
      likedEntityIds
      hiddenEntityIds
      blockedEntityIds
    }
    createdAt
    updatedAt
  }
}

# --- Business Queries ---

query Business($id: ID!) {
  business(id: $id) {
    id
    name
    description
    website
    mediaLinks {
      url
      description
    }
    products {
      id
      name
      description
    }
    owners {
      id
      name
      role
    }
    executives {
      role
      title
      person {
        id
        name
        role
      }
    }
    sponsoredEpisodes {
      id
      episodeTitle
      channelName
    }
  }
}

query Businesses($limit: Int, $offset: Int) {
  businesses(limit: $limit, offset: $offset) {
    id
    name
    description
    website
  }
}

# --- Product Queries ---

query Product($id: ID!) {
  product(id: $id) {
    id
    name
    description
    ingredients
    sourceUrl
    mediaLinks {
      url
      description
    }
    business {
      id
      name
      description
    }
    compounds {
      id
      name
      description
    }
    sponsorEpisodes {
      id
      episodeTitle
      channelName
    }
  }
}

query Products($limit: Int, $offset: Int) {
  products(limit: $limit, offset: $offset) {
    id
    name
    description
    ingredients
  }
}

# --- Person Queries ---

query Person($id: ID!) {
  person(id: $id) {
    id
    name
    role
    bio
    mediaLinks {
      url
      description
    }
    businesses {
      id
      name
      description
    }
    episodes {
      id
      episodeTitle
      channelName
    }
  }
}

query People($limit: Int, $offset: Int) {
  people(limit: $limit, offset: $offset) {
    id
    name
    role
  }
}

# --- Episode Queries ---

query Episode($id: ID!) {
  episode(id: $id) {
    id
    channelName
    episodeNumber
    episodeTitle
    episodeTranscriptUrl
    episodePageUrl
    webPageSummary
    webPageTimelines {
      from
      to
      title
      description
    }
    sponsorLinkObjects {
      text
      links
      hasCodeDave
      code
      brand
      discountPercent
    }
    takeaways
    s3TranscriptKey
    s3TranscriptUrl
    youtubeVideoId
    youtubeWatchUrl
    youtubeEmbedUrl
    mediaLinks {
      url
      description
    }
    publishedAt
    guests {
      id
      name
      role
    }
    summaryShort
    summaryDetailed
    publishedSummary
    businessLinks
    sponsorBusinesses {
      id
      name
      description
    }
    protocols {
      id
      name
      description
    }
  }
}

query Episodes($limit: Int, $offset: Int) {
  episodes(limit: $limit, offset: $offset) {
    id
    episodeTitle
    channelName
    episodeNumber
    publishedAt
  }
}

# --- Compound Queries ---

query Compound($id: ID!) {
  compound(id: $id) {
    id
    name
    description
    aliases
    mediaLinks {
      url
      description
    }
    products {
      id
      name
      description
    }
    caseStudies {
      id
      title
      summary
    }
  }
}

query Compounds($limit: Int, $offset: Int) {
  compounds(limit: $limit, offset: $offset) {
    id
    name
    description
    aliases
  }
}

# --- Protocol Queries ---

query Protocol($id: ID!) {
  protocol(id: $id) {
    id
    name
    description
    categories
    goals
    steps
    cautions
    aliases
    sourceUrl
    stepsStructured {
      label
      timeOfDay
      items {
        type
        refId
        nameOverride
        dosage
        timing
        notes
        itemEntity {
          __typename
          ... on Product {
            id
            name
            description
          }
          ... on Compound {
            id
            name
            description
          }
        }
      }
    }
    evidenceRefs {
      type
      refId
      label
      url
      episodeId
      timestamps
      notes
      evidenceRefEntity {
        __typename
        ... on Article {
          id
          title
          summary
        }
        ... on CaseStudy {
          id
          title
          summary
        }
        ... on Episode {
          id
          episodeTitle
          channelName
        }
        ... on External {
          url
          label
        }
      }
    }
    safety {
      warnings
      contraindications
      interactions
      notes
    }
    products {
      id
      name
      description
    }
    compounds {
      id
      name
      description
    }
  }
}

query Protocols($limit: Int, $offset: Int) {
  protocols(limit: $limit, offset: $offset) {
    id
    name
    description
    categories
    goals
  }
}

# --- CaseStudy Queries ---

query CaseStudy($id: ID!) {
  caseStudy(id: $id) {
    id
    title
    summary
    url
    sourceType
    mediaLinks {
      url
      description
    }
    episodes {
      id
      episodeTitle
      channelName
    }
    compounds {
      id
      name
      description
    }
    products {
      id
      name
      description
    }
    protocols {
      id
      name
      description
    }
  }
}

query CaseStudies($limit: Int, $offset: Int) {
  caseStudies(limit: $limit, offset: $offset) {
    id
    title
    summary
    url
  }
}

# --- Vector Search Queries ---

query VectorSearchProducts($args: VectorSearchArgs!) {
  vectorSearchProducts(args: $args) {
    id
    name
    description
    score
  }
}

query VectorSearchBusinesses($args: VectorSearchArgs!) {
  vectorSearchBusinesses(args: $args) {
    id
    name
    description
    score
  }
}

query VectorSearchPeople($args: VectorSearchArgs!) {
  vectorSearchPeople(args: $args) {
    id
    name
    bio
    score
  }
}

# --- User Saved Entities Queries ---

query SavedEntities($filter: SavedEntitiesFilterInput, $page: CursorPageInput) {
  savedEntities(filter: $filter, page: $page) {
    edges {
      cursor
      node {
        id
        userId
        targetType
        targetId
        note
        tags
        pinned
        source
        createdAt
        updatedAt
        target {
          __typename
          ... on Product {
            id
            name
            description
          }
          ... on Compound {
            id
            name
            description
          }
          ... on CaseStudy {
            id
            title
            summary
          }
          ... on Protocol {
            id
            name
            description
          }
          ... on Person {
            id
            name
            role
          }
          ... on Business {
            id
            name
            description
          }
          ... on Episode {
            id
            episodeTitle
            channelName
          }
          ... on Article {
            id
            title
            summary
          }
        }
      }
    }
    pageInfo {
      hasNextPage
      endCursor
    }
  }
}

# --- User Protocol Queries ---

query MyUserProtocols(
  $filter: UserProtocolsFilterInput
  $page: CursorPageInput
) {
  myUserProtocols(filter: $filter, page: $page) {
    edges {
      cursor
      node {
        id
        userId
        title
        goalType
        status
        sourceProtocolId
        stepsStructured {
          label
          timeOfDay
          items {
            type
            refId
            nameOverride
            dosage
            timing
            notes
            itemEntity {
              __typename
              ... on Product {
                id
                name
                description
              }
              ... on Compound {
                id
                name
                description
              }
            }
          }
        }
        evidenceRefs {
          type
          refId
          label
          url
          episodeId
          timestamps
          notes
          evidenceRefEntity {
            __typename
            ... on Article {
              id
              title
              summary
            }
            ... on CaseStudy {
              id
              title
              summary
            }
            ... on Episode {
              id
              episodeTitle
              channelName
            }
            ... on External {
              url
              label
            }
          }
        }
        safety {
          warnings
          contraindications
          interactions
          notes
        }
        lastEditedAt
        createdAt
        updatedAt
      }
    }
    pageInfo {
      hasNextPage
      endCursor
    }
  }
}

# --- Admin Queries ---

query AllUsers($limit: Int, $offset: Int) {
  allUsers(limit: $limit, offset: $offset) {
    id
    email
    name
    role
  }
}
